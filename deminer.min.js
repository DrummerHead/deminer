(function(){var a,b,c,d,e,f,g,h,i,j,k;h=$("#game"),i=/open(\d)/,f=function(a){return a.find('[class*="open"]:not(.open0)').filter(":visible")},e=function(a){var b,c,d,e,f,g,i,j,k,l;for(d=a.attr("id").split(",").map(function(a){return parseInt(a,10)}),b=$(),c=f=i=d[0]-1,j=d[0]+1;j>=f;c=f+=1)for(e=g=k=d[1]-1,l=d[1]+1;l>=g;e=g+=1)(c!==d[0]||e!==d[1])&&(b=b.add(h.find("[id='"+c+","+e+"']").filter(":visible")));return b},d=function(a){return parseInt(a.attr("class").match(i)[1],10)},a=function(a){var b;return b=0,a.each(function(){return $(this).hasClass("blank")||$(this).hasClass("bombflagged")?b+=1:void 0}),b},b=function(a){return a.hasClass("bombflagged")?void 0:a.trigger({type:"mousedown",button:2}).trigger({type:"mouseup",button:2})},j=function(a){return a.trigger({type:"mousedown",button:0}).trigger({type:"mousedown",button:2}).trigger({type:"mouseup",button:0}).trigger({type:"mouseup",button:2})},c=function(c){var f,g;return g=e(c),f=a(g),0!==f&&f===d(c)?g.each(function(){return b($(this))}):void 0},g=function(a){var b;return a.data("fertile")!==!1?(null==a.data("fertile")&&a.data("fertile",!1),b=!1,e(a).each(function(){return $(this).hasClass("blank")?(b=!0,a.data("fertile",b)):void 0}),b):!1},k=function(a){return g(a)?(c(a),j(a)):void 0},$(window).keypress(function(a){var b,c,d,e;return 106===a.which?(h.css({outline:"1em solid red"}),c=0,d=0,b=f(h),e=setInterval(function(){return b.length!==d?(b.each(function(){return k($(this))}),d=c,c=b.length,b=f(h)):(h.css({outline:"1em solid green"}),clearInterval(e))},16)):void 0}),setTimeout(function(){return console.log($("#face")),$("#face").on("click",function(){return h.find(".square").each(function(){return $(this).data("fertile",null)})})},500)}).call(this);